{
"title" : "A Peek At Facebook’s Insanely Awesome Monitoring Tool Claspin",
"date" : "Wed, 19 Sep 2012 18:09:30 +0000",
"author" : "Klint Finley"
}

<img width="100" height="70" src="http://tctechcrunch2011.files.wordpress.com/2012/07/facebooklogo.png?w=100&amp;h=70&amp;crop=1" class="attachment-tc-carousel-river-thumb wp-post-image" alt="facebooklogo" title="facebooklogo" style="float: left; margin: 0 10px 7px 0;" /><p>Facebook engineer Sean Lynch has built a mind-blowing, custom server-monitoring tool for the company that uses heat mapping to keep tabs on a huge number of servers at a glance.</p>
<p>Lynch is part of the cache performance team at Facebook. When things go wrong he needs to know quickly whether problems are being caused by caching or something else. Off the shelf monitoring tools just weren&#8217;t good enough.</p>
<p>So he built Claspin, a server-monitoring system named after a protein that monitors cells for DNA damage. And today he&#8217;s giving curious readers a tour of the system <a target="_blank" href="https://www.facebook.com/notes/facebook-engineering/monitoring-cache-with-claspin/10151076705703920">in a post on the Facebook Engineering Blog</a>.</p>
<p></p>
<p>Claspin displays grid-like maps representing servers grouped by rack. Each cell of the grid represents one server, and its color depends on the health of that particular server. Green for good, red for bad, yellow for in-between and black if it&#8217;s missing a stat (which means it&#8217;s probably down). This visualization approach enables Facebook engineers to check the status of a huge number of servers at once.</p>
<p>&#8220;On a 30&#8243; screen we could easily fit 10,000 hosts at the same time, with 30 or more stats contributing to their color, updated in real time — usually in a matter of seconds or minutes,&#8221; Lynch writes.</p>
<p>&#8220;When I first deployed Claspin, the view above had a lot more red in it,&#8221; he writes. &#8220;By making it easier for more people to spot server issues quickly, Claspin has allowed us to catch more &#8216;yellows&#8217; and prevent more &#8216;reds.&#8217;&#8221;</p>
<p>As to how Claspin determines the health of a system, Lynch writes: &#8220;I settled on coloring a host by its &#8216;hottest&#8217; statistic, with hotness computed from predefined thresholds. It&#8217;s dirt simple, but it gives us a way to encode tribal knowledge about what values are &#8216;bad&#8217; into the view.&#8221;</p>
<p></p>
<p>Claspin provides a tabbed interface so that Lynch can toggle between different views. He can also change which stats affect the color of the cells. &#8220;Mousing over a host draws an outline around its rack and pops up a tooltip with the hostname, rack number, and all the stats Claspin is looking at for that host, with the values colored based on Claspin&#8217;s thresholds for that stat,&#8221; he writes.</p>
<p>The interface is entirely browser-based. Coloring is done with JavaScript and the heatmaps are drawn with SVG. You can find out more and see a couple more screenshots <a target="_blank" href="https://www.facebook.com/notes/facebook-engineering/monitoring-cache-with-claspin/10151076705703920">on Lynch&#8217;s blog post</a>.</p>
<p>Facebook engineers have <a target="_blank" href="http://www.infoworld.com/d/application-development/facebook-we-need-create-our-own-dev-and-management-tools-196437">talked about Claspin before</a> in interviews, but I think this is the first time we&#8217;ve gotten a peek behind the curtain.</p>
<p>It doesn&#8217;t look like the company is open sourcing this project quite yet. &#8220;We always try to open source tools like this, so it&#8217;s something we&#8217;ll consider with Claspin,&#8221; a Facebook spokesperson told me. &#8220;But it&#8217;s possible that it&#8217;s so tightly integrated with our infrastructure that it wouldn&#8217;t be broadly useful.&#8221;</p>
<p>Facebook has <a target="_blank" href="https://developers.facebook.com/opensource/">open sourced a lot of its custom-built development and operations software</a>, including the NoSQL database <a target="_blank" href="http://cassandra.apache.org/">Apache Cassandra</a> and its PHP to C++ transformer <a target="_blank" href="https://github.com/facebook/hiphop-php">HipHop</a>. It&#8217;s even gone so far as to open source its <a href="http://techcrunch.com/2011/04/07/open-compute-project/">data center infrastructure plans</a>. So don&#8217;t be surprised to see this <a target="_blank" href="https://github.com/facebook">hit GitHub in the future</a>.</p>
<p>In the meantime, who&#8217;s going to be the first to clone it?</p>
<br /> The original article was posted <a href="http://feedproxy.google.com/~r/Techcrunch/~3/d_FboqIIN9s/">here</a>.